<h1>Техническое Задание для приложения-проекта ASTON "Рик и Морти"</h1>


<h2>Верхнеуровневое описание требований к проекту</h2>

<h4>Необходимо разработать приложение, основывающееся на <a href="https://rickandmortyapi.com/"><b>Rick and Morty API</b></a>, которое реализует следующий функционал: </h4>
<p><b>-</b> Экраны со списками персонажей, локаций и эпизодов;</p>
<p><b>-</b> Экраны с дополнительной информацией о персонаже, локации или эпизоде, выбранного в списке на другом экране;</p>
<p><b>-</b> Фильтрация по некоторым параметрам и поиск по имени на каждом экране со списком. При отсутствии данных по указанным параметрам = отображать информацию об этом на экране;</p>
<p><b>-</b> Пагинация на экранах со списком;</p>
<p><b>-</b> Функция Pull-to-Refresh на всех экранах;</p>
<p><b>-</b> Стрелка «Назад» на экранах с подробностями для навигации по экранам;</p>
<p><b>-</b> Кеширование во всем приложении и стабильную работу всех функций при отсутствии интернет соединения;</p>
<p><b>-</b> Отображение прогресс-индикаторов при загрузке данных;</p>
<p><b>-</b> Splash screen при открытии приложения реализованный через фон для системного Window;</p>
<p><b>-</b> Следование чистой архитектуре(CA) и шаблону MVVM;</p>
<p><b>-</b> Внедрение DI посредством Dagger 2;</p>
<p><b>-</b> Написание Unit Tests посредством JUnit.</p>

___________________________________________________________________

<h4>Реализовано: </h4>
<p><b>-</b> Single Activity приложение, с 3 Fragments для списков персонажей, локаций и эпизодов соответственно и с 3 Fragments для деталей персонажа, локации и эпизода. Навигация осуществляется через FragmentManager. NavigationBar отображается на всех экранах и с его помощью можно быстро вернуться на один из трех начальных экранов со списком. При этом будет удален BackStack;</p>
<p><b>-</b> Поиск по имени при вводе в EditText на каждом фрагменте со списком. AlertDialog с фильтрами открывается при нажатии на кнопку. Чтобы подтвердить применение фильтров нужно нажать на кнопку подтверждения в диалоге;</p>
<p><b>-</b> Пагинация реализована с помощью библиотеки Paging 3;</p>
<p><b>-</b> ProgressBar отображаются вместо каждого списка RecyclerView, пока происходит загрузка данных для адаптера. Также ProgressBar имеют каждая ячейка списков и аватары персонажей;</p>
<p><b>-</b> Информация для RecyclerView подается с помощью RecyclerAdapter и RecyclerPaginationAdapter с использованием DiffUtils;</p>
<p><b>-</b> Данные из Repository во ViewModel и далее во Fragments передается через LiveData и Flow;</p>
<p><b>-</b> Функция Pull-to-Refresh работает на всех экранах и обновляет данные на экране, а также обнуляет фильры;</p>
<p><b>-</b> Экраны с дополнительной информацией сохраняются в backstack и при множественном переходе по ним при помощи стрелки «Назад» можно поэтапно вернуться к экрану со списком, от которого начались переходы;</p>
<p><b>-</b> Splash screen при открытии приложения реализованный через фон для системного Window. Тема приложения изменяется при запуске MainActivity в onCreate();</p>
<p><b>-</b> Кеширование данных происходит в базу данных. Работа с ней реализована через Room. Данные сохраняются также и при просмотре подробностей о локации, персонаже или эпизоде и при фильтрации;</p>
<p><b>-</b> При вводе в фильтрах запроса, который не удовлетворяет ни одному элементу списка будет выведена информация об этом. Если приложение запускается первый раз без наличия интернет соединения, то будет выведена соответствующая надпись.</p>

<h4>Реализовано не полностью: </h4>
<p><b>-</b> DI внедрен при помощи Dagger2 с переменным успехом;</p>
<p><b>-</b> Unit Tests реализованы только для нескольких мапперов;</p>
<p><b>-</b> Реализация Clean Architecture и MVVM далека от идеальной.</p>


___________________________________________________________________

<h2>Навигация приложения</h2>
<img src="/README/navigation_in_app.jpg">
___________________________________________________________________

<h2>Архитектура экранов</h2>
<p>Реализация через Single Activity с BottomNavigationBar. При нажатии на одну из трех кнопок NavBar Обработка запроса происходит в MainViewModel, где изменяются данные liveData с информацией о фрагменте, который нужно открыть и заголовком, а также информацией о том, нужно ли показывать стрелку «Назад». При нажатии стрелки «Назад» или системной кнопки «Назад». Происходит проверка необходимости стереть BackStack и скрыть стрелку «Назад» и смены заголовка. Открытие фрагмента обрабатывается во ViewModel.</p>
<p>Переход между различными экранами деталей так же обрабатывается в MainViewModel, где меняется LiveData и прослушивается в MainActivity. Эти переходы сохраняются в BackSatck.</p>

<h2>Реализация функционала</h2>

<h3>Кэширование</h3>
<p>Для реализации кэширование используется ROOM с базой данных. В базе данных 3 основные таблицы (для хранения данных о локациях, эпизодах и персонажах), 3 таблицы для хранения ключей для Paging 3 и 3 сводные таблицы для хранения пар id Персонаж-Эпизоды, Эпизод-Персонажи и Локация-Эпизоды.</p>
<p>Запросы в базу данных происходят из Repository через Dao интерфейсы. Присутствуют запросы для всего списка, одного элемента и элементов с учетом критериев фильтров.</p>
<h3>Пагинация</h3>
<p>Реализована с использованием библиотеки Paging 3. Данные для RecyclerView обрабатываются соответсвтующим каждому списку Remotemediator-ом. Данные о нужной для подгрузки страницы берутся из класса Info, который приходит из сети вместе с запросом.</p>
<h3>Pull-to-Refresh</h3>
<p>Функция реализована на всех экранах. Её суть заключается в обновлении данных на экране. Т.е. если переход на экран был осуществлен в офланй-режиме и появилось интеренет соединение, то с применение Pull-to-Refresh данные будут браться не из базы данных, а и з сети</p>
<p>Также, если на экране с листом были применены фильтры, то при использовании Pull-to-Refresh они обнултся</p>
<h3>Фильтрация</h3>
<p>При нажатии на кнопку "Show filters" отображается AlertDialog со списком фильтров. Чтобы активировать конкретный фильтр нужно активировать соответствующий checkbox и указать критерии. После этого нажать на кнопку "Apply". После этого диалог закроется и на экране отобразится обновленный список.</p>
<p>Если данных, удовлетворящих запросу обнаружено не будет, то вместо данных отобразится соответствующая надпись.</p>